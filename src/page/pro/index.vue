<style scoped>
	
	.layout {
		background: #fff;
	}
	/* header样式开始*/

	header {
		height: 81px;
		background: #FFFFFF;
		border-bottom: 1px solid #e7e7e7;
	}

	.container {
		width: 1196px;
		margin: 0 auto;
	}

	.header-top {
		height: 81px;
	}

	.ivu-menu-horizontal {
		height: 81px;
		line-height: 74px;
	}

	.nav-center {
		margin-left: 20px;
	}

	.nav-r {
		float: right;
		margin-top: 26px;
	}



	.ivu-menu-horizontal .ivu-menu-item,
	.ivu-menu-horizontal .ivu-menu-submenu {
		float: left;
		padding: 0 18px;
		position: relative;
		cursor: pointer;
		z-index: 3;
		transition: all .2s ease-in-out;
		border-top: 6px solid #fff;
	}

	.ivu-menu-light.ivu-menu-horizontal .ivu-menu-item-active,
	.ivu-menu-light.ivu-menu-horizontal .ivu-menu-item:hover,
	.ivu-menu-light.ivu-menu-horizontal .ivu-menu-submenu-active,
	.ivu-menu-light.ivu-menu-horizontal .ivu-menu-submenu:hover {
		color: #51ad79;
		border-bottom: none;
		border-top: 6px solid #51ad79;
		font-size: 16px;
	}

	.ivu-menu-item {
		display: block;
		outline: 0;
		list-style: none;
		font-size: 16px;
		position: relative;
		z-index: 1;
		cursor: pointer;
		transition: all .2s ease-in-out;
	}

	.ivu-menu {
		list-style: none;
		color: #657180;
		font-size: 16px;
	}

	.ivu-select-selection:hover {
		border-color: #51ad79;
	}

	.ivu-btn-primary {
		color: #fff;
		background-color: #51ad79;
		border-color: #51ad79;
	}

	.ivu-btn-ghost:hover {
		color: #51ad79;
		background-color: transparent;
		border-color: #51ad79;
	}

	.ivu-btn-primary:hover {
		color: #fff;
		background-color: #51ad79;
		border-color: #51ad79;
		opacity: 0.8;
	}

	.banner {
		background: url("../../img/index-banner.png") center top no-repeat;
		height: 512px;
		background-size: cover;
	}

	.banner-main {
		width: 802px;
		padding: 24px;
		background: #272727;
		border-radius: 4px;
		opacity: 0.7;
		margin-top: 80px;
		margin: auto;
	}

	.banner-logo {
		width: 109px;
		margin: 20px auto;
	}

	.ivu-tabs.ivu-tabs-card>.ivu-tabs-bar .ivu-tabs-tab {
		margin: 0;
		margin-right: 14px;
		height: 31px;
		padding: 5px 16px 4px;
		border: 1px solid #d7dde4;
		border-bottom: 0;
		border-radius: 4px 4px 0 0;
		transition: all .3s ease-in-out;
		background: #f5f7f9;
	}

	.ivu-input {
		display: inline-block;
		width: 100%;
		height: 41px;
		line-height: 1.5;
		padding: 4px 7px;
		font-size: 12px;
		border: 1px solid #d7dde4;
		border-radius: 4px;
		color: #657180;
		background-color: #fff;
		background-image: none;
		position: relative;
		cursor: text;
		transition: border .2s ease-in-out, background .2s ease-in-out, box-shadow .2s ease-in-out;
	}

	.ivu-tabs.ivu-tabs-card>.ivu-tabs-bar .ivu-tabs-tab-active {
		height: 32px;
		padding-bottom: 5px;
		background: #fd1212;
		transform: translateZ(0);
		border-color: #d7dde4;
		color: #39f;
	}
	/*header样式结束*/

	.ivu-tabs-nav .ivu-tabs-tab-active {
		color: #fff;
	}

	.search {
		margin: 20px 0;
		border-radius: 0 4px 4px 0;
		width: 94px;
		margin-left: -4px;
	}

	.footer {
		height: 163px;
		border-top: 5px solid #51ad79;
		background: #333333;
		margin-top: 140px;
		padding-top: 22px;
	}

	.footer-l {
		float: left;
	}

	.footer-r {
		float: right;
		color: #fff;
	}

	.footer-l ul li {
		color: #fff;
		float: left;
		padding: 0 16px;
		border-right: 1px solid #474747;
	}

	.footer-r ul li {
		color: #fff;
		float: left;
		padding: 0 16px;
		border-left: 1px solid #474747;
	}

	.footer-l div {
		color: #b4b4b4;
		padding-left: 16px;
	}

	.cardList {
		width: 1000px;
		margin: 10px auto;
		box-shadow: 2px 2px 5px #efefef, -2px -2px 5px #efefef;
	}

	.ivu-card-head {
		border-bottom: none;
	}

	.ivu-card-head h3 {
		text-align: center;
		font-size: 22px;
		font-family: normal;
		color: #000;
	}

	.cardList-content h3 {
		margin-bottom: 20px;
		padding-bottom: 15px;
		border-bottom: 1px solid #efefef;
	}

	.cardList-content h3 span {
		padding-left: 10px;
		border-left: 4px solid #51ad79;
	}

	.forgetPassWord {
		float: right;
	}

	.loginList {
		text-align: center;
	}

	.loginList li {
		display: inline-block;
		margin: 0 15px;
	}

	.loginTab .ivu-tabs-bar {
		border-bottom: 1px solid #000;
	}

	.tuijian-user {
		height: 64px;
		width: 64px;
		border-radius: 50px;
		background: url("../../img/yuijian-user.png");
		margin: 0 auto;
		margin-top: 38px;
		
	}
</style>
<template>
	<div class="layout">
		 <!--<header>
			<div class="container">
				<Row>
					<i-col span="2" class="region ">
						<a class="logo" href="#">
							<img src="../../img/huiyuan-logo.png" alt="">
						</a>
					</i-col>
					<i-col span="2" class="region ">
						<Cascader :data="cityList" v-model="value1"></Cascader>
					</i-col>
					<i-col span="2" class="region ">
						<Select filterable class="select1">
							<Option v-for="item in corpList" :value="item.value" :key="item">{{ item.value }}</Option>
						</Select>
					</i-col>
					<i-col span="12" class="nav-center">
						<Menu mode="horizontal" active-name="/pro/index" @on-select="routeTo">
						   <Menu-item name="1">
								<img src="../../img/head-icon1-lv.png" alt=""> 无忧导航
							</Menu-item>
							<Menu-item name="/pro/firstPage">
								<img src="../../img/head-icon2.png" alt=""> 无忧首页
							</Menu-item>
							<Menu-item name="2">
								<img src="../../img/head-icon3.png" alt=""> 掌上无忧
							</Menu-item>
							<Menu-item name="4">
								<img src="../../img/head-icon4.png" alt=""> 地图导航
							</Menu-item>
							<Submenu name="/pro/member">
								<template slot="title">
									会员中心
								</template>
								<Menu-item name="/corpInfo/corpRegister">企业注册</Menu-item>
								<Menu-item name="/corpInfo/govRegister">机关注册</Menu-item>
							</Submenu>
							<Menu-item name="4">
								应用中心
							</Menu-item>
						</Menu>
					</i-col>
					<i-col span="3" class="nav-r" v-model="loginUserMyNo" v-if="loginuserinfo == null">
						<Button type="ghost" class="btn1" @click="regist()">注册</Button>
						<Button type="primary" size="large" class="btn1" @click="loginuser()">登陆</Button>
						<Modal v-model="modal2" width="360" :closable="false">
							<Tabs class="loginTab" v-model="value">
								<tab-pane label="注册" name="注册">
									<div style="text-align:center">
										<Form ref="formInline" :model="formInline" :rules="ruleInline">
											<Form-item prop="user">
												<i-input type="text" v-model="formInline.user" placeholder="请输入用户名">
													<icon slot="prepend" type="ios-person-outline" size="20">
													</Icon>
												</i-input>
											</Form-item>
											<Form-item prop="password">
												<i-input type="password" v-model="formInline.password" placeholder="请输入密码">
													<Icon type="ios-locked-outline" slot="prepend" size="20"></Icon>
												</i-input>
											</Form-item>
											<Form-item prop="password">
												<Input type="password" v-model="formInline.password1" placeholder="请确认密码" />
												<Icon type="ios-locked-outline" slot="prepend"></Icon>
											</Form-item>
											<Form-item>
												<Button type="primary" shape="circle" @click="handleSubmit('formInline')" style="width:100%">注册无忧账号</Button>
											</Form-item>
										</Form>
									</div>
								</tab-pane>
								<tab-pane label="登录" name="登录">
									<Form ref="formInline" :model="formInline" :rules="ruleInline">
										<Form-item prop="user">
											<i-input type="text" v-model="formInline.user" placeholder="用户名">
												<icon slot="prepend" type="ios-person-outline" size="20">
												</Icon>
											</i-input>
										</Form-item>
										<Form-item prop="password">
											<i-input type="password" v-model="formInline.password" placeholder="密码">
												<Icon type="ios-locked-outline" slot="prepend" size="20"></Icon>
											</i-input>
										</Form-item>
										<Form-item>
											<span class="forgetPassWord">忘记密码</span>
										</Form-item>
										<Form-item>
											<ul class="loginList">
												<li>
													<img src="../../img/weixin-icon.png" />
													<p>微信登录</p>
												</li>
												<li>
													<img src="../../img/QQ-icon.png" />
													<p>QQ登录</p>
												</li>
											</ul>
										</Form-item>
										<Form-item>
											<Button type="primary" shape="circle" @click="login('formInline')" style="width:100%">登录</Button>
										</Form-item>
									</Form>
								</tab-pane>
							</Tabs>
							<div slot="footer">
							</div>
						</Modal>
					</i-col>
					<Col span="3" style="float: right;height:81px;" v-model="loginUserMyShow" v-else>
					<button class="chakan51">查看Ta的无忧</button>
					<img src="../../img/ns-search.png" alt="" style="  margin-top: 20px;margin-right: 14px">
					<img src="../../img/tongzhi.png" alt="" style="vertical-align: top;margin-top: 32px;margin-right: 14px">
					<p href="#" style=";float: right;line-height: 81px;font-size: 14px;">
						<Dropdown >
							<a href="javascript:void(0)" style="color: #51ad79">
								{{loginuserinfo.displayName}}
                                <Icon type="arrow-down-b"></Icon>
							</a>
							<Dropdown-menu slot="list" trigger="click">
								<Dropdown-item>账户安全</Dropdown-item>
								<Dropdown-item><a :href="['http://192.168.7.61:8080/ovit/center/address.htm?uid='+loginuserinfo.uniqueId]" target="_blank">收货地址</a></Dropdown-item>
								<Dropdown-item>消费记录</Dropdown-item>
								<Dropdown-item><a href="javascript:void(0)" @click="logout()">退出</a></Dropdown-item>
							</Dropdown-menu>
						</Dropdown>
					</p>
					<Badge count="3" style="margin-top: 30px;float: right;margin-right: 20px">
						<a href="#" class="demo-badge">
							<Icon type="ios-bell" size="22" style="color: #51ad79"></Icon>
						</a>
					</Badge>
					</Col>
					<i-col span="2">
						<Modal v-model="modal1" width="850">
							<h1 style="font-size: 24px;font-weight: normal;line-height: 70px;text-align: center">推荐好友</h1>
							<Row style="    padding-left: 14px;">
								<Col span="6" style="width: 138px;height: 174px;border: 1px solid #cccccc;border-radius: 7px;margin: 10px  10px" v-for="f in friend">
								<div>
									<div style="position: absolute;left: 0;top: 0"><img src="../../img/huiyuan-gou.png" alt=""></div>
									<div style="position: absolute;right:10px;top: 10px">
										<img src="../../img/huiyuan-hongxin.png" alt="">
									</div>
									<span style="font-size: 14px;color: #4fac77;position: absolute;right: 30px;top: 6px">222</span>
									<div class="tuijian-user"></div>
									<div style="text-align: center;font-size: 16px;margin-top: 8px">
										<span><img src="../../img/tuijian-vip.png" alt=""></span>
										<span>{{f.displayName}}</span>
									</div>
									<div style="text-align: center;margin-top: 4px">
										<Button type="ghost" size="small" style="margin: auto">农业</Button>
									</div>
								</div>
								</Col>
							</Row>
							<div style="text-align: center;" slot="footer">
								<Button type="primary" shape="circle" size="large" style="width: 200px;height: 50px;margin: 20px 0;font-size: 16px">一键关注</Button>
								<span style="font-size: 16px;padding-left: 16px;vertical-align: middle;" @click="pass()">跳过</span>
							</div>
						</Modal>
					</i-col>
				</Row>
			</div>
		</header>-->
		<top-bar></top-bar>
		<!--header结束-->
		<div>
			<router-view></router-view>
		</div>
		<div class="footer">
			<div class="container">
				<div class="footer-l">
					<ul>
						<li>关于NSS1</li>
						<li>公益性质</li>
						<li>服务项目</li>
						<li>以往案例</li>
						<li>新闻动态</li>
						<li>联系我们</li>
					</ul>
					<br/>
					<br/>
					<div>Copyright©2015trecare.com All Rights Reserved 版权所有TREcare
						<br/>备案号：蜀ICP备88888888号-1</div>
				</div>
				<div class="footer-r">
					<ul>
						<li>微博</li>
						<li>微信</li>
						<li>Support:DGG Group</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
</template>
<script>
import Qs from 'qs'
import axios from 'axios'
import $ from 'jquery'
import top from '../../top.vue'
export default {
	components: {
    	'top-bar': top
  	},
	name: 'app',
	data() {
		return {
			loginuserinfo: '',
			portal :'',
			value1: [],
			/*cityList: this.$zone.data,
            loginUserMyNo: true,
            loginUserMyShow:false,
            modal1: false,
			modal2: false,*/
			modal_loading: false,
			modal3: false,
			modal4: false,
			modal5: false,
			value: [],
			friend: [],
			currentPage: 0,
			/*corpList:[
			 	{value:'湖北帝昊源生物工程有限公司'},
			 	{value:'京山泰康源种养专业合作社'},
			 	{value:'京山马嘉领农业科贸有限公司'},
			 	{value:'武汉望乡创客网络科技有限公司'},
			 	{value:'南湖养鱼基地'},
			 	{value:'湖北鑫三江生态园'},
			 	{value:'武汉汇春名优农产品专业合作社'},
			 	{value:'恩施二坡健康蔬菜合作社'},
			 	{value:'湖北百禾生态农业科技有限公司'},
			 	{value:'荆沙蔬菜种植专业合作社'},
			 	{value:'武汉天下先现代农业发展专业合作社'},
			 	{value:'枣阳市千业农业科技有限公司'},
			 	{value:'老河口市万紫千红葡萄家庭农场'}
			 ],*/
			/*formInline: {
				user: '',
				password: '',
				password1: ''
			},
			ruleInline: {
				user: [{
					required: true,
					message: '请填写用户名',
					trigger: 'blur'
				}],
				password: [{
					required: true,
					message: '请填写密码',
					trigger: 'blur'
				},				
				{
					type: 'string',
					min: 6,
					message: '密码长度不能小于6位',
					trigger: 'blur'
				}],
				password1: [{
					required: true,
					message: '请填写密码',
					trigger: 'blur'
				},				
				{
					type: 'string',
					min: 6,
					message: '密码长度不能小于6位',
					trigger: 'blur'
				}],
				methods: {
					del() {
						this.modal_loading = true
						setTimeout(() => {
							this.modal_loading = false
							this.modal2 = false
							this.$Message.success('删除成功')
						}, 2000)
					},
					ok() {
						this.$Message.info('点击了确定')
					},
					cancel() {
						this.$Message.info('点击了取消')
					}
				}
			},*/
			cardShow: false,
			appShow: true
		}
	},
	created: function () {
		this.$router.push('/pro/firstPage')
		this.friends();
        /*this.loginuserinfo=JSON.parse(sessionStorage.getItem("user"))
        console.log("user="+this.loginuserinfo)*/
	},
	methods: {
		modalShow() {
			this.cardShow = !this.cardShow
			this.appShow = !this.appShow
		},
		search: function () {
			this.$router.push({
				path: '/search'
			})
		},
		/*routeTo(e) {
			if(e == '/portal'){
				this.portal = 'http://192.168.7.61:8080/ovit/center/gateway.htm?uid='+this.loginuserinfo.uniqueId
				window.open(this.portal)
			}else{
				this.$router.push(e)
			}
		},*/
	/*	/!*注册*!/
		handleSubmit(name) {
			this.$refs[name].validate((valid) => {
				if (valid) {
					axios({
						method: 'post',
						url: 'http://localhost:1111/login/insert',
						data: {
							username: this.formInline.user,
							pwd: this.formInline.password
						}
					}).then(response => {
						if ('exists' === response.data.msg) {
							this.$Message.error('用户名已存在！')
						} else {
							sessionStorage.setItem("user", JSON.stringify(response.data.msg))
							this.modal2 = false
							this.modal1 = true
                            this.$Message.success('注册成功!')
                            console.log(response.data.msg)
						}
					}).catch(function (error) {
						console.log(error)
					})
				}
			})
		},
		//登录
		login(name) {
			this.$refs[name].validate((valid) => {
				if (valid) {
					axios({
						method: 'post',
						url: 'http://localhost:1111/login/login',
						data: {
							username: this.formInline.user,
							pwd: this.formInline.password
						}
					}).then(response => {
						if (undefined != response.data.user) {
							sessionStorage.setItem("user", JSON.stringify(response.data.user))
							this.$Message.success('登录成功!')
							this.modal2 = false
							this.loginuserinfo=JSON.parse(sessionStorage.getItem("user"))
 							window.location.reload()
						} else {
							this.$Message.error('用户名或密码错误!')
						}
					}).catch(function (error) {
						console.log(error)
					})
				}
			})
		},
		//点击登录显示登录界面
		loginuser() {
			this.value = '登录'
			this.modal2 = true
		},
		//点击注册显示注册界面
		regist() {
			this.value = '注册'
			this.modal2 = true
		},*/
		//推荐好友
		friends() {
			axios.get('http://localhost:1111/login/friends/' + this.currentPage)
				.then(response => {
					this.friend = response.data.list
					this.total = response.data.total
					console.log(response.data)
				})
		},
		nextPage(page) {
			this.currentPage = page;
			axios.get('http://localhost:1111/login/friends/' + this.currentPage)
				.then(response => {
					this.friend = response.data.list
					this.total = response.data.total
				})
		},
		pass() {
			this.modal1 = !this.modal1
		// },
		// logout(){
		// 	axios.get('http://localhost:1111/login/logout')
		// 		.then(response => {
		// 			console.log(response.data)
		// 		})
		// 		sessionStorage.removeItem("user")				
		// 		window.location.reload()
		}
	}
}
</script>