<style scoped >
    .layout {
        background: #fff;
    }

    header {
        height: 81px;
        background: #FFFFFF;
        border-bottom: 1px solid #e7e7e7;
    }

    /*main样式开始*/
    .main {
        margin-top: 10px;
    }

    .mian-left {
        border-right: 1px solid #fafafa;
        width: 210px;

    }

    /*main样式结束*/

    .ivu-menu-light.ivu-menu-vertical .ivu-menu-item-active:not(.ivu-menu-submenu) {
        color: #51ad79;

    }

    .ivu-menu-light.ivu-menu-vertical .ivu-menu-item-active:not(.ivu-menu-submenu) {
        color: #51ad79;
        border-right: 2px solid #51ad79;
        z-index: 2;
    }

    .mian-center {
        max-width: 702px;
        margin-left: 10px;
        margin-top: 60px;
        background: #fafafa;
        border: 1px solid #eeeeee;
        padding-bottom: 500px;
    }

    .main-user {
        position: absolute;
        left: 0;
        right: 0;
        margin: auto;
        margin-top: -46px;

    }

    .main-top-bg {
        height: 135px;
        width: 100%;
        background: url("../../img/images/mian-img.png") no-repeat center top;
        position: relative;
    }

    .main-t-r {
        width: 74%;
        margin-top: 24px;
        height: 100px;
    }

    .main-t-r ul li {
        float: right;
        margin-right: 28px;
        text-align: center;
    }

    .main-t-r span {
        font-size: 20px;
        font-weight: 500;

    }

    .main-t-r p {
        font-size: 14px;

    }

    .main-bot {
        width: 600px;

        margin: 0 auto;
        border-top: 1px solid #ededed;
        position: relative;
    }

    .main-bot-title {
        width: 120px;
        height: 35px;
        font-size: 18px;
        background: #ededed;
        text-align: center;
        line-height: 35px;
        position: absolute;
        top: -20px;
        left: 0px;
        right: 0px;
        margin: auto;
        color: #333;
        border-radius: 18px;
    }

    .mian-bot1-title {
        width: auto;
        height: 18px;
        font-size: 16px;
        margin-top: 46px;
        border-left: 4px solid #51ad79;
        padding-left: 10px;
        line-height: 16px;

    }

    .mian-bot1-title a {
        color: #333;
        font-size: 12px;
    }

    .main-bot2 img {
        margin-right: 16px;
        margin-top: 8px;
    }

    .main-bot2 p {
        font-size: 14px;
        line-height: 30px;
    }

    .main-bot2 ul {
        margin-right: 63px;
    }

    .main-bot2 ul li {
        line-height: 30px;
        font-size: 14px;
    }

    .main-bot3 li {
        line-height: 18px;

    }

    .main-bot3 ul {
        margin-left: 24px;

    }

    .check-box ul li {
        margin-bottom: 20px;
        font-size: 14px;

    }

    .ivu-switch-checked {
        border-color: #51ad79;
        background-color: #51ad79;
    }

    .ivu-btn-group-small > .ivu-btn {
        padding: 4px 12px;
        font-size: 12px;
        border-radius: 3px;
    }

    .ivu-btn-group:not(.ivu-btn-group-vertical) .ivu-btn-primary:not(:first-child):not(:last-child) {
        border: 1px solid #51ad79;
    }

    .ivu-btn:hover {
        color: #51ad79;
        background-color: #fff;
        border-color: #51ad79;
    }

    /*本页出了头和底部样式结束*/
</style>
<template>
    <!--mian中边开始-->
    <div class="main-bot">
        <div class="main-bot-title">最新动态</div>
        <div class="mian-bot1" style="margin-bottom: 160px">
            <div class="mian-bot1-title">
                <span>个人认证</span>
                &nbsp;
                <span style="font-size: 12px ;color: #fe3f3f">您参与的百科条目有更新</span>
                <div style="float: right">
                    <a style="color: #51ad79;padding-left: 10px" @click="userCertificationEdit"> 重新认证</a>
                </div>
                <Modal v-model="userCertificationShow" title="重新认证" width="360">
                    <div style="text-align:center">
                        <Form ref="userCertification" :model="userCertification" :rules="ruleInline">
                            <Form-item prop="sex">
                                <Select v-model="userCertification.sex" placeholder="性别" v-on:input ="inputUserCertification">
                                    <Option value="男">男</Option>
                                    <Option value="女">女</Option>                                    
                                </Select>                                                           
                            </Form-item>
                            <Form-item prop="profession">
                                <Input type="text" v-model="userCertification.profession" placeholder="专业" v-on:input ="inputUserCertification">
                                <Icon type="ios-locked-outline" slot="prepend"></Icon>
                                </Input>
                            </Form-item>
                            <Form-item prop="field">
                                <Input type="text" v-model="userCertification.field" placeholder="擅长领域"  v-on:input ="inputUserCertification">
                                <Icon type="ios-locked-outline" slot="prepend"></Icon>
                                </Input>
                            </Form-item>
                            <Form-item prop="title">
                                <Input type="text" v-model="userCertification.title" placeholder="职称" v-on:input ="inputUserCertification">
                                <Icon type="ios-locked-outline" slot="prepend"></Icon>
                                </Input>
                            </Form-item>
                            <div>
                                <h2 style="text-align: center;padding:0 0 10px 0;font-size: 18px;font-weight: normal">实时预览</h2>
                                <Input v-model="userCertificationContent" type="textarea" :rows="4" placeholder="请输入..."></Input>
                            </div>
                        </Form>
                    </div>
                    <div slot="footer">
                        <Button type="primary" shape="circle" @click="userCertificationSubmit('userCertification')" style="width:100%">确定</Button>
                    </div>
                </Modal>
                <div class="main-bot2"
                     style="border-top:1px solid #ededed;margin-top: 12px;padding-top: 8px">
                    <img src="../../img/images/user3.png" alt="" style="float: left">
                    <p>认证信息：达人认证</p>
                    <ul style="float: left">
                        <li>性别：{{sex}}</li>
                        <li>专业：{{profession}}</li>
                    </ul>
                    <ul style="float: left">
                        <li></li>
                        <li>擅长领域：{{field}}</li>
                        <li>职称：{{title}}</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</template>
<script>
import axios from 'axios'
import $ from 'jquery'
var userCertificationtxt = ''
export default {

    data() {
        return {
            userCertificationShow: false,
            portal :'',
            sex: '',
            profession: '',
            field: '',
            title: '',
            status: '',
            userCertification: {
                sex: '',
                profession: '',
                field: '',
                title: '',
                status: '',
            }          
        }
    },
    created: function () {
        this.fetchData()
    },
    methods: {
        fetchData: function () {
            axios.get('http://localhost:1111/userCertification/findUserCertification')
                .then(response => {
                    this.sex = response.data.sex
                    this.profession = response.data.profession
                    this.field = response.data.field
                    this.title = response.data.title
                    this.status = response.data.status
                }).catch(function (error) {
                    console.log(error)
                })
        },
        routeTo(e) {
            if(e == '/portal'){
                this.portal = 'http://192.168.7.61:8080/gf_mall_client/shop/seller.html?memLoginId='+this.loginuserinfo.loginAccount
                window.open(this.portal)
            }else{
                this.$router.push(e)
            }
        },
        userCertificationEdit() {
            if (this.userCertificationShow == false) {
                this.userCertificationShow = true
            }
        },
        userCertificationSubmit(name) {
            axios({
                method: 'post',
                url: 'http://localhost:1111/userCertification/updateUserCertification',
                data: {
                    sex: this.userCertification.sex,
                    profession: this.userCertification.profession,
                    field: this.userCertification.field,
                    title: this.userCertification.title
                }
            }).then(response => {
                this.flag = response.data.flag
                if (this.flag == '1') {
                    this.$Message.success('修改成功!')
                    this.userCertificationShow = false
                    this.fetchData()
                }

            }).catch(function (error) {
                this.$Message.success('修改失败!');
                console.log(error)
            })
        },
        inputUserCertification() {
            if (this.userCertification.sex != '') {
                userCertificationtxt = "性别：" + this.userCertification.sex

            }
            if (this.userCertification.profession != '') {
                userCertificationtxt += ",专业：" + this.userCertification.profession

            }
            if (this.userCertification.field != '') {
                userCertificationtxt += ",擅长领域：" + this.userCertification.field

            }
            if (this.userCertification.title != '') {
                userCertificationtxt += ",职称：" + this.userCertification.title

            }
            this.userCertificationContent = userCertificationtxt
        }
    }
}
</script>